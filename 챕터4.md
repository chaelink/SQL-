오라클 예상 실행 계획
SQL Server 예상 실행계획
오라클 Auto trace
오라클 sql 트레이스

오라클 AWR(Automatic Workload Repository)
- 성능 데이터를 자동으로 수집, 저장, 분석하는 내장 기능
- 주기적인 성능 스냅샷 촬영으로 병목 현상 및 원인 파악


오라클 ASH(Active Session History) 
- DB에서 현재 활성 상태인 세션들의 활동 내역을 초 단위로 샘플링하여 기록하고 분석하는 기능
- V$ACTIVE_SESSION_HISTORY 뷰와 DBA_HIST_ACTIVE_SESSION_HISTORY 뷰에 데이터 저장
- AWR과 보통 같이 사용


오라클 동적 성능 뷰 
- DB 실시간 상태 및 성능 정보를 제공하는 가상 테이블
- 명령어가 v$로 시작


Index Skip Scan이 성능을 보이는 경우
- 데이터가 충분히 많을 때?

In List 튜닝 

NVL함수
- 옵션조건에 nvl이나 decode 함수를 사용하면 union all 형태로 쿼리 변환하므로 변별력이 좋은 컬럼에 효과적이다

NDV

NL조인
- 인덱스를 사용하는 랜덤액세스 위주의 조인 방식
- 조인할 대상 레코드가 아무리 많아도, 최초 n건 빠르게 출력 가능(부분범위 처리)
- 부분범위 처리가 불가능하더라도 소량데이터 상황에서는 효과적
- 인덱스 유무 및 구성에 따라 성능이 크게 달라짐
- outer 로우 수가 많고 inner 로우 수가 적으면 조인 순서 변경 가능
- 힌트(오라클) : ordered(from 절 순서대로), use_nl, leading(여기에 원하는 순서대로 모두 기재)
- 힌트(sql server) : force order, loop join,

소트머지조인
- 각각 데이터를 소트 후 PGA에 저장, 머지(NL조인)
- 조인 조건식이 =조건이 아닌 대량 데이터 조인에 사용
- 조인 조건식이 아예 없는 조인(Cross Join, 카테시안 곱)에 사용

해시조인
- 조인 컬럼을 key로 하는 해시 맵을 만들어 NL조인하는 방식
- 힌트 : use_hash
- 두 테이블이 모두 대량일 경우, divide&conquer 방식 사용
- 해시 맵은 pga 영역에 할당된 hash area에 저장

서브쿼리조인

서브쿼리
- 인라인 뷰 : from 절
- 중첩 : where 절
- 스칼라 : 한 레코드 당 하나의 값을 반환하는 서브 쿼리

실행계획 읽는 법
- cr : 논리적인 블록 요청 횟수
- pr : 디스크에서 읽은 블록 수
- pw : 디스크에 쓴 블록 수

-------
- 블록 하나에 몇개의 레코드를 담을 수 있는지?
